(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2197"],{2355:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"bg-dark"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),t._m(0),t.carts.length?a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col py-5 page-content-height"},[t._m(1),a("hr",{staticClass:"border-white mb-0 hr-border-width"}),t._l(t.carts,(function(s){return a("div",{key:s.product.id+1,staticClass:"d-md-none text-white mt-4 box-shadow"},[a("div",{staticClass:"d-flex align-items-center p-3"},[a("div",{staticClass:"mr-3"},[a("img",{staticClass:"h-55",attrs:{src:s.product.imageUrl[0],alt:""}})]),a("div",{staticClass:"d-flex w-100 align-items-center justify-content-between"},[a("p",{staticClass:"mb-0 h6"},[t._v(t._s(s.product.title))]),a("div",{staticClass:"badge badge-pill badge-primary"},[t._v(" "+t._s(s.product.category)+" ")])])]),a("div",{staticClass:"d-flex justify-content-between align-items-center\n          px-3 mt-2"},[a("div",{staticClass:"input-group input-group-lg mr-5"},[a("div",{staticClass:"input-group-prepend"},[a("button",{staticClass:"btn btn-primary d-flex align-items-center",attrs:{type:"button",disabled:1===s.quantity},on:{click:function(a){s.quantity--,t.updateQuantity(s.product.id,s.quantity)}}},[t.status.loadingUpdateCart===s.product.id?a("span",{staticClass:"spinner-border spinner-border-sm spinner-size-s"}):a("span",[t._v("-")])])]),a("input",{directives:[{name:"model",rawName:"v-model",value:s.quantity,expression:"item.quantity"}],staticClass:"form-control text-center",attrs:{min:"1",type:"number",disabled:1===s.quantity},domProps:{value:s.quantity},on:{keyup:function(a){return t.updateQuantity(s.product.id,s.quantity)},input:function(a){a.target.composing||t.$set(s,"quantity",a.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary d-flex align-items-center",attrs:{type:"button",disabled:t.status.loadingUpdateCart===s.product.id},on:{click:function(a){s.quantity++,t.updateQuantity(s.product.id,s.quantity)}}},[t.status.loadingUpdateCart===s.product.id?a("span",{staticClass:"spinner-border spinner-border-sm spinner-size-s"}):a("span",[t._v("+")])])])]),a("div",[a("a",{staticClass:"btn btn-outline-primary btn-square",attrs:{role:"button",href:"#"},on:{click:function(a){return a.preventDefault(),t.deleteCartItem(s.product.id)}}},[a("i",{staticClass:"fas fa-trash-alt pt-2"})])])]),a("hr"),a("div",{staticClass:"d-flex justify-content-end px-3 pb-3"},[a("p",{staticClass:"h5 mr-2"},[t._v("金額")]),a("p",{staticClass:"h5"},[t._v(" "+t._s(t._f("money")(s.product.price*s.quantity))+" ")])])])})),a("div",{staticClass:"table-responsive text-white d-none d-md-block"},[a("table",{staticClass:"table table-striped mb-0"},[t._m(2),a("tbody",t._l(t.carts,(function(s){return a("tr",{key:s.product.id+1},[a("td",{staticClass:"text-center px-0 table-width-s"},[a("img",{staticClass:"table-img-height-s-plus",attrs:{src:s.product.imageUrl[0],alt:""}})]),a("td",{staticClass:"align-middle text-white text-center table-width-s"},[t._v(" "+t._s(s.product.title)+" ")]),a("td",{staticClass:"align-middle text-center table-width-m-plus"},[a("div",{staticClass:"input-group w-50"},[a("div",{staticClass:"input-group-prepend"},[a("button",{staticClass:"btn btn-primary d-flex align-items-center",attrs:{type:"button",disabled:1===s.quantity},on:{click:function(a){return t.updateQuantity(s.product.id,s.quantity-1)}}},[t.status.loadingUpdateCart===s.product.id?a("span",{staticClass:"spinner-border spinner-border-sm spinner-size-s"}):a("span",[t._v("-")])])]),a("input",{staticClass:"form-control text-center",attrs:{min:"1",type:"number",disabled:s.quantity<=1},domProps:{value:s.quantity},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.updateQuantity(s.product.id,a.target.value)},change:function(a){return t.updateQuantity(s.product.id,a.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-primary d-flex align-items-center",attrs:{type:"button",disabled:t.status.loadingUpdateCart===s.product.id},on:{click:function(a){return t.updateQuantity(s.product.id,s.quantity+1)}}},[t.status.loadingUpdateCart===s.product.id?a("span",{staticClass:"spinner-border spinner-border-sm spinner-size-s"}):a("span",[t._v("+")])])])])]),a("td",{staticClass:"align-middle text-white text-center table-width-m-plus"},[t._v(" "+t._s(t._f("money")(s.product.price*s.quantity)))]),a("td",{staticClass:"align-middle text-center table-width-s"},[a("a",{staticClass:"text-danger",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.deleteCartItem(s.product.id)}}},[a("i",{staticClass:"fas fa-md fa-trash-alt"})])])])})),0)]),a("hr",{staticClass:"border-white mb-0 hr-border-width"})]),a("div",{staticClass:"container text-white"},[t.cartTotal>0?a("div",{staticClass:"d-flex justify-content-between\n          justify-content-md-end mt-4"},[a("p",{staticClass:"mb-0 h4 font-weight-bold table-width-xs"},[t._v("總金額")]),a("p",{staticClass:"mb-0 h4 font-weight-bold"},[t._v(t._s(t._f("money")(t.cartTotal)))])]):t._e()]),a("div",{staticClass:"row d-flex justify-content-between mt-4"},[a("div",{staticClass:"col-md-2"},[a("router-link",{staticClass:"btn btn-outline-light btn-block",attrs:{to:"/products"}},[t._v(" 繼續選購 ")])],1),a("div",{staticClass:"col-md-2 mt-3 mt-md-0"},[a("router-link",{staticClass:"btn btn-secondary btn-block",attrs:{to:"/cart-form"}},[t._v(" 下一步 ")])],1)])],2)])]):a("div",{staticClass:"container page-content-height"},[t._m(3),a("div",{staticClass:"row d-flex justify-content-center mt-3 pb-5"},[a("div",{staticClass:"col-md-2"},[a("router-link",{staticClass:"btn btn-secondary btn-block",attrs:{to:"/products"}},[t._v(" 繼續選購 ")])],1)])])],1)},i=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"jumbotron jumbotron-fluid bg-cover mb-0 bg-img-height-s",staticStyle:{"background-image":"url(https://images.unsplash.com/photo-1510267222691-b90c3f0494d6?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1650&q=80)"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 d-none d-md-block"},[a("div",{staticClass:"d-flex flex-column align-items-start mt-minus-m"},[a("h1",{staticClass:"text-primary font-weight-bold pt-5 font-size-xl font-KaushanScript"},[t._v("Cart")])])]),a("div",{staticClass:"col-md-5 d-md-none"},[a("div",{staticClass:"d-flex justify-content-center align-items-center mt-2 text-shadow"},[a("h1",{staticClass:"text-primary font-weight-bold pt-5 font-size-xl font-KaushanScript"},[t._v("Cart")])])])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"d-flex justify-content-center"},[a("h2",{staticClass:"text-white mb-0 font-weight-bold"},[t._v("購物車")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("thead",{staticClass:"text-white text-center"},[a("td",[t._v("產品圖片")]),a("td",[t._v("產品名稱")]),a("td",[t._v("數量")]),a("td",[t._v("價格")]),a("td",[t._v("刪除")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"row flex-column justify-content-center align-items-center"},[a("div",{staticClass:"col pt-5"},[a("div",{staticClass:"d-flex justify-content-center"},[a("h2",{staticClass:"text-white mb-0 font-weight-bold"},[t._v("購物車")])]),a("hr",{staticClass:"border-white mb-0 hr-border-width"}),a("div",{staticClass:"d-flex justify-content-center"},[a("p",{staticClass:"h3 text-white mt-3"},[t._v("購物車無商品，快去逛逛！")])])]),a("div",{staticClass:"col-md-5"},[a("img",{staticClass:"img-fluid mt-3",attrs:{src:"https://images.unsplash.com/photo-1511795267602-0424436b99c5?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=3150&q=80",alt:""}})])])}],n=(a("99af"),a("4160"),a("159b"),{data:function(){return{carts:[],cartTotal:0,isLoading:!1,status:{loadingUpdateCart:""}}},created:function(){this.getCart()},methods:{getCart:function(){var t=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/","api/").concat("9cbd42bc-33b9-4cd2-bed8-7413186f826b","/ec/shopping");this.$http.get(s).then((function(s){t.status.loadingUpdateCart="",t.carts=s.data.data,t.updateToTalPrice(),t.isLoading=!1})).catch((function(s){t.status.loadingItem="",t.$bus.$emit("message:push","取得資料失敗!".concat(s.response.data.errors),"danger"),t.isLoading=!1}))},updateToTalPrice:function(){var t=0;this.carts.forEach((function(s){t+=s.product.price*s.quantity})),this.cartTotal=t},updateQuantity:function(t,s){var a=this;if(s<1)this.$bus.$emit("message:push","數量不可低於1喔!","danger");else{this.status.loadingUpdateCart=t;var e="".concat("https://course-ec-api.hexschool.io/","api/").concat("9cbd42bc-33b9-4cd2-bed8-7413186f826b","/ec/shopping"),i={product:t,quantity:s};this.$http.patch(e,i).then((function(){a.status.loadingUpdateCart="",a.getCart(),a.$bus.$emit("message:push","商品數量更新成功!","success")})).catch((function(){a.status.loadingUpdateCart="",a.$bus.$emit("message:push","商品數量更新失敗!","danger")}))}},deleteCartItem:function(t){var s=this;this.isLoading=!0;var a="".concat("https://course-ec-api.hexschool.io/","api/").concat("9cbd42bc-33b9-4cd2-bed8-7413186f826b","/ec/shopping/").concat(t);this.$http.delete(a).then((function(){s.$bus.$emit("get-cart"),s.getCart(),s.isLoading=!1,s.$bus.$emit("message:push","商品已刪除!","success")})).catch((function(){s.isLoading=!1,s.$bus.$emit("message:push","商品刪除失敗!","danger")}))}}}),c=n,r=a("2877"),d=Object(r["a"])(c,e,i,!1,null,null,null);s["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0b2197.aa3e20bd.js.map